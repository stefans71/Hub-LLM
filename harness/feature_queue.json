{
  "meta": {
    "version": "2.1",
    "total_elements": 917,
    "completed_elements": 862,
    "completion_percentage": 94,
    "last_updated": "2024-01-24",
    "phase": "Terminal Integration"
  },
  "queue": [
    {
      "id": "T-01",
      "name": "Terminal WebSocket Endpoint",
      "size": "M",
      "priority": 1,
      "status": "pending",
      "description": "Create WebSocket endpoint at /api/terminal/ws that handles terminal connections",
      "reference_existing": [
        "backend/routes/vps.js - VPS connection logic",
        "backend/services/ - Check for existing SSH services",
        "frontend/src/pages/Settings.jsx - VPSConnectionsSettings shows working SSH"
      ],
      "requirements": [
        "WebSocket endpoint at /api/terminal/ws",
        "Accept projectId or vpsId to identify which VPS to connect",
        "Use express-ws or ws library",
        "Handle connection lifecycle (open, message, close, error)"
      ],
      "depends_on": [],
      "test": "wscat -c ws://localhost:8000/api/terminal/ws"
    },
    {
      "id": "T-02",
      "name": "SSH Session Service",
      "size": "M",
      "priority": 2,
      "status": "pending",
      "description": "Create SSH session service using ssh2 library to connect to VPS",
      "reference_existing": [
        "VPS credentials are already stored in database",
        "VPS connection UI shows 'Connected' status - that logic exists",
        "Check backend/models/ for VPS/connection schemas"
      ],
      "requirements": [
        "Use ssh2 library for SSH connections",
        "Retrieve VPS credentials from database (host, port, username, key/password)",
        "Create interactive shell session",
        "Pipe SSH stdin/stdout through WebSocket from T-01",
        "Handle auth failures, timeouts, disconnects gracefully"
      ],
      "depends_on": ["T-01"],
      "test": "Connect via WebSocket, type 'ls', see real directory listing"
    },
    {
      "id": "T-03",
      "name": "Terminal WebSocket Hook",
      "size": "S",
      "priority": 3,
      "status": "pending",
      "description": "Connect Terminal.jsx xterm.js instance to backend WebSocket",
      "reference_existing": [
        "frontend/src/components/Terminal.jsx - xterm.js already set up",
        "frontend/src/components/LLMDevPanel.jsx - Terminal tab container"
      ],
      "requirements": [
        "Create useTerminalWebSocket hook or integrate into Terminal.jsx",
        "Connect xterm.onData to WebSocket send",
        "Connect WebSocket onmessage to xterm.write",
        "Pass projectId/vpsId from Workspace context"
      ],
      "depends_on": ["T-02"],
      "test": "Open workspace, see real terminal prompt from VPS"
    },
    {
      "id": "T-04",
      "name": "Terminal Status UI",
      "size": "XS",
      "priority": 4,
      "status": "pending",
      "description": "Show terminal connection status and reconnect button",
      "requirements": [
        "Show 'Connecting...', 'Connected', 'Disconnected' states",
        "Add reconnect button on disconnect",
        "Show error messages if connection fails"
      ],
      "depends_on": ["T-03"],
      "test": "Disconnect VPS, see status change, click reconnect"
    },
    {
      "id": "F-01",
      "name": "File Listing API",
      "size": "S",
      "priority": 5,
      "status": "pending",
      "description": "Create API endpoint to list files/directories on VPS",
      "reference_existing": [
        "Use same SSH connection from T-02",
        "Run 'ls -la' or use sftp for directory listing"
      ],
      "requirements": [
        "GET /api/files?vpsId=X&path=/path - returns directory tree",
        "Return: name, type (file/dir), size, permissions, modified date",
        "Handle permission errors gracefully"
      ],
      "depends_on": ["T-02"],
      "test": "curl /api/files?path=/ returns JSON directory listing"
    },
    {
      "id": "F-02",
      "name": "FileBrowser Integration",
      "size": "S",
      "priority": 6,
      "status": "pending",
      "description": "Connect FileBrowser.jsx to real file listing API",
      "reference_existing": [
        "frontend/src/components/FileBrowser.jsx - UI exists with mock data"
      ],
      "requirements": [
        "Fetch real directory tree from F-01 API",
        "Expand folders on click (lazy load subdirectories)",
        "Show loading states",
        "Handle errors (permission denied, etc.)"
      ],
      "depends_on": ["F-01"],
      "test": "See real files from VPS in file browser"
    },
    {
      "id": "F-03",
      "name": "File Read/Write API",
      "size": "S",
      "priority": 7,
      "status": "pending",
      "description": "Create API endpoints to read and write file contents",
      "requirements": [
        "GET /api/files/content?vpsId=X&path=/file - returns file content",
        "PUT /api/files/content - saves file content",
        "Handle binary vs text files",
        "Handle large files (streaming or size limit)"
      ],
      "depends_on": ["T-02"],
      "test": "Read a file, modify it, save it, verify change on VPS"
    },
    {
      "id": "F-04",
      "name": "CodeEditor Integration",
      "size": "S",
      "priority": 8,
      "status": "pending",
      "description": "Connect CodeEditor.jsx to load/save real files",
      "reference_existing": [
        "frontend/src/components/CodeEditor.jsx - Monaco editor exists"
      ],
      "requirements": [
        "Click file in FileBrowser → load content into editor",
        "Cmd+S / Save button → write to VPS via F-03 API",
        "Show save status (saving, saved, error)",
        "Handle unsaved changes warning"
      ],
      "depends_on": ["F-02", "F-03"],
      "test": "Open file, edit, save, verify change persists"
    }
  ],
  "completed": [
    {"id": "W-03", "name": "Workspace Top Bar", "completed": "2024-01-24"},
    {"id": "W-31", "name": "Icon Sidebar", "completed": "2024-01-24"},
    {"id": "W-38", "name": "File Explorer Panel", "completed": "2024-01-24"},
    {"id": "W-88", "name": "LLM-Dev Panel", "completed": "2024-01-24"},
    {"id": "S-64", "name": "Anthropic Subscription", "completed": "2024-01-24"},
    {"id": "S-96", "name": "Default Model Section", "completed": "2024-01-24"},
    {"id": "S-166", "name": "Voice Input Section", "completed": "2024-01-24"},
    {"id": "S-218", "name": "Global Skills Section", "completed": "2024-01-24"},
    {"id": "M-45", "name": "Skill Modal", "completed": "2024-01-24"},
    {"id": "D-73", "name": "Dashboard Stats", "completed": "2024-01-24"},
    {"id": "W-54", "name": "Chat Panel", "completed": "2024-01-24"},
    {"id": "W-69", "name": "Preview Panel", "completed": "2024-01-24"},
    {"id": "M-01", "name": "Model Notification", "completed": "2024-01-24"},
    {"id": "M-10", "name": "Agent Modal", "completed": "2024-01-24"},
    {"id": "M-63", "name": "MCP Server Modal", "completed": "2024-01-24"}
  ],
  "notes": {
    "vps_connection_works": "SSH connection to VPS is already working - see Settings > VPS Connections. Credentials stored in database. Reference this existing code.",
    "terminal_component_exists": "Terminal.jsx has xterm.js set up but connected to mock data",
    "file_components_exist": "FileBrowser.jsx and CodeEditor.jsx exist but use mock data",
    "docker_deferred": "Docker integration (D-01, D-02) deferred - do after terminal/files work"
  }
}
