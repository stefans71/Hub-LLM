{
  "version": "6.0",
  "updated": "2026-02-06",
  "session_docs": [
    "CLAUDE.md",
    "harness/feature_queue.json"
  ],
  "vision": {
    "summary": "Chat-focused workspace with LLM-Dev panel for dev tools",
    "main_area": "Chat ONLY (no tabs)",
    "llm_dev_panel": {
      "tabs": [
        "Terminal",
        "Editor",
        "Docker",
        "Logs",
        "Project Context"
      ],
      "terminal": "Multi-terminal split panes with color coding"
    },
    "left_sidebar": {
      "status_dots": "\u25cf green=connected, \u25cb gray=disconnected, \ud83d\udd34 red=error",
      "project_menu": "3-dot menu (Rename, Settings, Delete)",
      "truncation": "Names truncate with hover tooltip"
    }
  },
  "queue": [
    {
      "id": "BUG-29",
      "name": "Signup 500 — init_db creates 0-byte DB, no tables",
      "size": "XS",
      "priority": 1,
      "status": "pending_review",
      "description": "BLOCKER. Signup returns 500: 'no such table: users'. The DB file at backend/hubllm.db exists but is 0 bytes — no SQLite header, no tables. init_db() (models/__init__.py:225-229) runs and prints 'Database initialized' but create_all produces nothing on disk. All 5 model classes inherit from the same Base in models/__init__.py. Versions: SQLAlchemy 2.0.25 + aiosqlite 0.19.0. Suspected cause: aiosqlite transaction commit issue where DDL runs but writes aren't persisted.",
      "change": [
        "models/__init__.py init_db() — Step 1 DIAGNOSE: Before create_all, add `print(f'Tables to create: {list(Base.metadata.tables.keys())}')`. Temporarily set echo=True on engine (line 28). Run backend, check if CREATE TABLE SQL is actually emitted.",
        "models/__init__.py init_db() — Step 2 VERIFY: After create_all, query sqlite_master to confirm tables exist. `result = await conn.execute(text(\"SELECT name FROM sqlite_master WHERE type='table'\"))` — if empty, raise RuntimeError so it fails loudly instead of silently.",
        "models/__init__.py init_db() — Step 3 FIX: If DDL is emitted but not committed, the fix is to ensure commit. Options: (a) add explicit `await conn.execute(text('SELECT 1'))` after create_all to force flush, (b) try `conn.run_sync(Base.metadata.create_all, checkfirst=True)` with NullPool on engine, (c) create a one-shot sync engine for DDL: `sync_engine = create_engine(DATABASE_URL.replace('+aiosqlite', '')); Base.metadata.create_all(sync_engine); sync_engine.dispose()`. Option (c) is the most reliable fallback.",
        "Remove echo=True after fix is confirmed. Keep the sqlite_master verification permanently as a safety net."
      ],
      "test": "Delete backend/hubllm.db, restart backend (kill process, re-run init.sh). Check: (1) hubllm.db is NOT 0 bytes, (2) `sqlite3 backend/hubllm.db '.tables'` shows all 5 tables (users, vps_servers, projects, chat_messages, user_settings), (3) signup at hubllm.dev creates account without 500 error. REQUIRED: paste sqlite3 .tables output and signup response in completion_note as test evidence.",
      "completion_note": "Fixed init_db() to use sync engine for DDL instead of aiosqlite async engine. Added sqlite_master verification with RuntimeError on failure. Verified: (1) hubllm.db is 45056 bytes (not 0), (2) sqlite3 .tables output: 'chat_messages  projects  user_settings  users  vps_servers', (3) curl POST /api/auth/signup returns 201 with access_token/refresh_token.",
      "completion_checklist": {
        "code_works": true,
        "index_updated": true,
        "learnings_written": true,
        "committed_pushed": true,
        "status_set_to_pending_review": true
      }
    },
    {
      "id": "INFRA-03",
      "name": "Idle Connection Timeout",
      "size": "S",
      "priority": 2,
      "status": "pending",
      "description": "Auto-close SSH connections after inactivity to save server resources",
      "current": "Connections stay open forever until browser closes or network fails",
      "change": [
        "Track last activity time per VPS connection",
        "Background task checks for idle connections every 5 min",
        "Close connections idle for 2 hours (configurable in Settings)",
        "Send connection_status: disconnected to all terminals before closing",
        "User can reconnect easily via INFRA-02"
      ],
      "test": "Open terminal, leave idle for 2+ hours. Connection auto-closes. Dot turns gray. User clicks dot to reconnect."
    },
    {
      "id": "FEAT-10",
      "name": "Project-Specific Claude Code Sessions",
      "size": "S",
      "priority": 2,
      "status": "pending",
      "description": "Ensure Claude Code conversations are isolated per project with no history leaking",
      "current": "Claude --resume runs in project directory, should isolate history. Needs verification.",
      "change": [
        "Verify: switching projects disconnects old Claude session, starts fresh in new project dir",
        "Verify: claude --resume only shows conversations from current project",
        "Store last conversation ID per project in localStorage",
        "On project switch: clear chat messages, reconnect to correct project directory",
        "Add subtle pulse animation on active project dot when Claude is processing"
      ],
      "test": "Chat in Fishing App \u2192 switch to Other Project \u2192 see empty chat \u2192 switch back \u2192 can resume Fishing App conversation"
    },
    {
      "id": "SETTINGS-01",
      "name": "Wire Settings Connected Status to Real Detection",
      "size": "S",
      "priority": 3,
      "status": "pending",
      "description": "Settings page shows mock 'Anthropic connected' - wire to real Claude Code detection",
      "current": "Settings shows hardcoded mock status for Anthropic connection",
      "change": [
        "In Settings, show real connection status for:",
        "- OpenRouter: Check if API key exists in localStorage and display status",
        "- Anthropic: Check if any saved VPS has Claude Code authenticated",
        "- VPS list: Show which VPSes have Claude Code installed/authenticated",
        "Reuse detection logic pattern from CLAUDE-01"
      ],
      "test": "Settings shows real status - Anthropic only 'connected' if Claude Code detected on a VPS"
    },
    {
      "id": "MODEL-04",
      "name": "Dynamic Model List from OpenRouter API",
      "size": "M",
      "priority": 3,
      "status": "pending",
      "description": "Replace hardcoded MODEL_LIST with live data from OpenRouter public API",
      "current": "Model selector uses hardcoded MODEL_LIST with ~16 models",
      "change": [
        "Fetch models from https://openrouter.ai/api/v1/models (public, no auth required)",
        "Cache results in localStorage with timestamp (refresh daily or on demand)",
        "Show ALL models in selector, even without API key",
        "Without key: models greyed out with 'Add OpenRouter key' message",
        "With key: all OpenRouter models enabled",
        "Keep Anthropic models special case - show 'Pro Subscription' if Claude Code detected"
      ],
      "test": "No API key \u2192 see full model list greyed out. Add key \u2192 all enabled."
    },
    {
      "id": "CLAUDE-03",
      "name": "Claude Resume Conversation Support (UI Enhancement)",
      "size": "S",
      "priority": 3,
      "status": "pending",
      "description": "Add UI for resuming Claude Code conversations - core functionality already working via --resume",
      "current": "claude --resume runs automatically on reconnect. User sees terminal picker.",
      "change": [
        "Add 'Resume conversation' button/menu in chat header",
        "Show conversation list in prettier UI (not just terminal picker)",
        "Display conversation metadata: name, date, message count",
        "Quick-resume last conversation option",
        "Store last conversation ID per project"
      ],
      "test": "Click Resume \u2192 see pretty list of past conversations \u2192 select one \u2192 continues in chat"
    },
    {
      "id": "BUBBLE-01",
      "name": "Bubble View Polish and Edge Cases",
      "size": "S",
      "priority": 4,
      "status": "pending",
      "description": "Address remaining bubble parsing edge cases as discovered during testing",
      "current": "Bubble view MVP complete - functional for demos. Some UI artifacts occasionally leak through.",
      "change": [
        "Add new spinner words as discovered",
        "Improve tool call visibility (show 'Using Write tool...' indicator)",
        "Better handling of multi-line code blocks",
        "Consider headless mode integration for cleaner parsing (future)"
      ],
      "test": "Extended use of bubble view without seeing spinner text, status bar fragments, or other UI artifacts"
    }
  ],
  "completed": [
    {
      "id": "BUG-28",
      "name": "Setup Wizard Skipped After Account Creation",
      "completed": "2026-02-06"
    },
    {
      "id": "DOCS-05",
      "name": "Promote Critical Learnings",
      "completed": "2026-02-06"
    },
    {
      "id": "DOCS-06",
      "name": "Generate Full CODEBASE_INDEX.yaml",
      "completed": "2026-02-06"
    },
    {
      "id": "BUG-25",
      "name": "Project Click Doesn't Switch Claude Terminal Chat or LLM-Dev Terminal",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-26",
      "name": "Clickable Status Dots Don't Trigger Reconnect",
      "completed": "2026-01-26"
    },
    {
      "id": "INFRA-02",
      "name": "VPS Reconnect UX",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-24",
      "name": "Chat Shows Welcome Instead of Loading After Project Create",
      "completed": "2026-01-26"
    },
    {
      "id": "INFRA-01",
      "name": "SSH Connection Multiplexing",
      "completed": "2026-01-26"
    },
    {
      "id": "PHASE-2",
      "name": "Chat Bubble Rendering for Claude Code Output",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-23",
      "name": "Setup Wizard VPS Validation Rejects Valid SSH Key",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-22",
      "name": "Chat Terminal Scrollbar and Resize Handle",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-21",
      "name": "Project Switch/Refresh Doesn't Reconnect VPS",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-20",
      "name": "Create Project Fails When Adding New VPS Inline (already fixed)",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-19",
      "name": "Setup Wizard VPS Form Different Validation",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-17",
      "name": "Setup Wizard VPS Test Connection Not Working",
      "completed": "2026-01-26"
    },
    {
      "id": "BUG-18",
      "name": "Claude Code Terminal in Chat Not Receiving Keyboard Input",
      "completed": "2026-01-26"
    },
    {
      "id": "CLAUDE-02-REWORK",
      "name": "Chat Area as Terminal Mirror for Claude Code (Phase 1)",
      "completed": "2026-01-26"
    },
    {
      "id": "ONBOARD-01",
      "name": "Setup Wizard Skeleton",
      "completed": "2026-01-25"
    },
    {
      "id": "MODEL-03",
      "name": "Billing Switch Warning Popup",
      "completed": "2026-01-25"
    },
    {
      "id": "MODEL-02",
      "name": "Billing Source Detection and Display",
      "completed": "2026-01-25"
    },
    {
      "id": "CLAUDE-02",
      "name": "Route Chat to Claude Code on VPS (replaced by rework)",
      "completed": "2026-01-25"
    },
    {
      "id": "MODEL-01",
      "name": "Per-Project Model Persistence",
      "completed": "2026-01-25"
    },
    {
      "id": "CLAUDE-01",
      "name": "Detect Claude Code on VPS",
      "completed": "2026-01-25"
    },
    {
      "id": "AUTH-01",
      "name": "Password Validation Rules",
      "completed": "2026-01-25"
    },
    {
      "id": "CLEANUP-03",
      "name": "Fix Config Mismatch - Standardize on SQLite + Port 8000",
      "completed": "2026-01-25"
    },
    {
      "id": "FEAT-08",
      "name": "Chat File Drop and Paste",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-16",
      "name": "Terminal Pane Can't Resize Smaller",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-15",
      "name": "Terminal Connection Drops on Panel Toggle",
      "completed": "2026-01-25"
    },
    {
      "id": "FEAT-09",
      "name": "Multi-Terminal Split Panes with Color Coding",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-14",
      "name": "Editor Tab Not Loading Selected File",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-13",
      "name": "TERMINALS Sidebar Not Visible",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-12",
      "name": "xterm-screen Width Calculation",
      "completed": "2026-01-25"
    },
    {
      "id": "FEAT-07",
      "name": "Multiple Terminal Tabs",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-11",
      "name": "LLM-Dev Tabs Don't Switch Content",
      "completed": "2026-01-25"
    },
    {
      "id": "BUG-10",
      "name": "Terminal Content Cutoff",
      "completed": "2026-01-25"
    },
    {
      "id": "FEAT-04",
      "name": "Terminal Opens in Project Directory",
      "completed": "2026-01-25"
    },
    {
      "id": "FEAT-03",
      "name": "Remove Explorer from LLM-Dev Panel",
      "completed": "2026-01-25"
    },
    {
      "id": "FEAT-06",
      "name": "LLM-Dev Editor Tab",
      "completed": "2026-01-25"
    },
    {
      "id": "UI-06",
      "name": "Delete Confirmation Modal",
      "completed": "2026-01-25"
    },
    {
      "id": "UI-05",
      "name": "Project 3-Dot Menu",
      "completed": "2026-01-25"
    },
    {
      "id": "UI-04",
      "name": "Project Name Truncation",
      "completed": "2026-01-25"
    },
    {
      "id": "UI-03",
      "name": "Project Status Dots",
      "completed": "2026-01-25"
    },
    {
      "id": "UI-02",
      "name": "Remove Servers/Codespaces Tabs",
      "completed": "2026-01-25"
    },
    {
      "id": "UI-01",
      "name": "Simplify Top Bar",
      "completed": "2026-01-25"
    }
  ]
}