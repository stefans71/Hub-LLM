{
  "version": "5.5",
  "updated": "2026-01-26",
  "session_docs": ["CLAUDE.md", "harness/feature_queue.json"],
  "vision": {
    "summary": "Chat-focused workspace with LLM-Dev panel for dev tools",
    "main_area": "Chat ONLY (no tabs)",
    "llm_dev_panel": {
      "tabs": ["Terminal", "Editor", "Docker", "Logs", "Project Context"],
      "terminal": "Multi-terminal split panes with color coding"
    },
    "left_sidebar": {
      "status_dots": "â— green=connected, â—‹ gray=disconnected, ðŸ”´ red=error",
      "project_menu": "3-dot menu (Rename, Settings, Disconnect, Delete)",
      "truncation": "Names truncate with hover tooltip"
    }
  },
  "queue": [
    {
      "id": "PHASE-2",
      "name": "Chat Bubble Rendering for Claude Code Output",
      "size": "M",
      "priority": 1,
      "status": "pending",
      "description": "Render Claude Code terminal output as pretty chat bubbles in chat area",
      "current": "Chat area shows raw terminal output (Phase 1 complete)",
      "approach": [
        "From CLAUDE-02-REWORK investigation:",
        "- Wrap term.write() to intercept output before rendering",
        "- Parse patterns: lines starting with > = user input",
        "- Strip ANSI codes with util.stripVTControlCharacters()",
        "- Alternative: Use --output-format stream-json for structured parsing"
      ],
      "change": [
        "Create chat bubble renderer component",
        "Intercept xterm.js output stream",
        "Detect user input (> prompt) vs Claude response",
        "Render user messages as right-aligned bubbles",
        "Render Claude responses as left-aligned bubbles with avatar",
        "Keep raw terminal available (toggle or in LLM-Dev panel)",
        "Handle code blocks, markdown rendering in bubbles"
      ],
      "test": "Chat shows pretty bubbles for conversation. User messages right, Claude left. Code blocks formatted. Can toggle to raw terminal view."
    },
    {
      "id": "FEAT-10",
      "name": "Share Claude Code Session Between Chat and LLM-Dev Terminal",
      "size": "M",
      "priority": 2,
      "status": "pending",
      "description": "Chat area and LLM-Dev terminal should show the same Claude Code session",
      "current": "Chat terminal and LLM-Dev terminal are separate SSH connections - two different sessions",
      "change": [
        "When Claude Code mode active, use single shared WebSocket connection",
        "Chat area shows styled view of session (Phase 2: chat bubbles)",
        "LLM-Dev terminal shows raw view of same session",
        "User can interact from either view",
        "Input from chat goes to shared session, output appears in both views"
      ],
      "test": "Type in chat â†’ appears in LLM-Dev terminal. Type in LLM-Dev â†’ appears in chat. Same conversation."
    },
    {
      "id": "SETTINGS-01",
      "name": "Wire Settings Connected Status to Real Detection",
      "size": "S",
      "priority": 3,
      "status": "pending",
      "description": "Settings page shows mock 'Anthropic connected' - wire to real Claude Code detection",
      "current": "Settings shows hardcoded mock status for Anthropic connection",
      "change": [
        "In Settings, show real connection status for:",
        "- OpenRouter: Check if API key exists in localStorage and display status",
        "- Anthropic: Check if any saved VPS has Claude Code authenticated",
        "- VPS list: Show which VPSes have Claude Code installed/authenticated",
        "Reuse detection logic pattern from CLAUDE-01"
      ],
      "test": "Settings shows real status - Anthropic only 'connected' if Claude Code detected on a VPS"
    },
    {
      "id": "MODEL-04",
      "name": "Dynamic Model List from OpenRouter API",
      "size": "M",
      "priority": 3,
      "status": "pending",
      "description": "Replace hardcoded MODEL_LIST with live data from OpenRouter public API",
      "current": "Model selector uses hardcoded MODEL_LIST with ~16 models",
      "change": [
        "Fetch models from https://openrouter.ai/api/v1/models (public, no auth required)",
        "Cache results in localStorage with timestamp (refresh daily or on demand)",
        "Show ALL models in selector, even without API key",
        "Without key: models greyed out with 'Add OpenRouter key' message",
        "With key: all OpenRouter models enabled",
        "Keep Anthropic models special case - show 'Pro Subscription' if Claude Code detected"
      ],
      "test": "No API key â†’ see full model list greyed out. Add key â†’ all enabled."
    },
    {
      "id": "CLAUDE-03",
      "name": "Claude Resume Conversation Support (UI Enhancement)",
      "size": "S",
      "priority": 3,
      "status": "pending",
      "description": "Add UI for resuming Claude Code conversations - core functionality already working via --resume",
      "current": "claude --resume runs automatically on reconnect. User sees terminal picker.",
      "change": [
        "Add 'Resume conversation' button/menu in chat header",
        "Show conversation list in prettier UI (not just terminal picker)",
        "Display conversation metadata: name, date, message count",
        "Quick-resume last conversation option",
        "Store last conversation ID per project"
      ],
      "test": "Click Resume â†’ see pretty list of past conversations â†’ select one â†’ continues in chat"
    }
  ],
  "completed": [
    {"id": "BUG-23", "name": "Setup Wizard VPS Validation Rejects Valid SSH Key", "completed": "2026-01-26"},
    {"id": "BUG-22", "name": "Chat Terminal Scrollbar and Resize Handle", "completed": "2026-01-26"},
    {"id": "BUG-21", "name": "Project Switch/Refresh Doesn't Reconnect VPS", "completed": "2026-01-26"},
    {"id": "BUG-20", "name": "Create Project Fails When Adding New VPS Inline (already fixed)", "completed": "2026-01-26"},
    {"id": "BUG-19", "name": "Setup Wizard VPS Form Different Validation", "completed": "2026-01-26"},
    {"id": "BUG-17", "name": "Setup Wizard VPS Test Connection Not Working", "completed": "2026-01-26"},
    {"id": "BUG-18", "name": "Claude Code Terminal in Chat Not Receiving Keyboard Input", "completed": "2026-01-26"},
    {"id": "CLAUDE-02-REWORK", "name": "Chat Area as Terminal Mirror for Claude Code (Phase 1)", "completed": "2026-01-26"},
    {"id": "ONBOARD-01", "name": "Setup Wizard Skeleton", "completed": "2026-01-25"},
    {"id": "MODEL-03", "name": "Billing Switch Warning Popup", "completed": "2026-01-25"},
    {"id": "MODEL-02", "name": "Billing Source Detection and Display", "completed": "2026-01-25"},
    {"id": "CLAUDE-02", "name": "Route Chat to Claude Code on VPS (replaced by rework)", "completed": "2026-01-25"},
    {"id": "MODEL-01", "name": "Per-Project Model Persistence", "completed": "2026-01-25"},
    {"id": "CLAUDE-01", "name": "Detect Claude Code on VPS", "completed": "2026-01-25"},
    {"id": "AUTH-01", "name": "Password Validation Rules", "completed": "2026-01-25"},
    {"id": "CLEANUP-03", "name": "Fix Config Mismatch - Standardize on SQLite + Port 8000", "completed": "2026-01-25"},
    {"id": "FEAT-08", "name": "Chat File Drop and Paste", "completed": "2026-01-25"},
    {"id": "BUG-16", "name": "Terminal Pane Can't Resize Smaller", "completed": "2026-01-25"},
    {"id": "BUG-15", "name": "Terminal Connection Drops on Panel Toggle", "completed": "2026-01-25"},
    {"id": "FEAT-09", "name": "Multi-Terminal Split Panes with Color Coding", "completed": "2026-01-25"},
    {"id": "BUG-14", "name": "Editor Tab Not Loading Selected File", "completed": "2026-01-25"},
    {"id": "BUG-13", "name": "TERMINALS Sidebar Not Visible", "completed": "2026-01-25"},
    {"id": "BUG-12", "name": "xterm-screen Width Calculation", "completed": "2026-01-25"},
    {"id": "FEAT-07", "name": "Multiple Terminal Tabs", "completed": "2026-01-25"},
    {"id": "BUG-11", "name": "LLM-Dev Tabs Don't Switch Content", "completed": "2026-01-25"},
    {"id": "BUG-10", "name": "Terminal Content Cutoff", "completed": "2026-01-25"},
    {"id": "FEAT-04", "name": "Terminal Opens in Project Directory", "completed": "2026-01-25"},
    {"id": "FEAT-03", "name": "Remove Explorer from LLM-Dev Panel", "completed": "2026-01-25"},
    {"id": "FEAT-06", "name": "LLM-Dev Editor Tab", "completed": "2026-01-25"},
    {"id": "UI-06", "name": "Delete Confirmation Modal", "completed": "2026-01-25"},
    {"id": "UI-05", "name": "Project 3-Dot Menu", "completed": "2026-01-25"},
    {"id": "UI-04", "name": "Project Name Truncation", "completed": "2026-01-25"},
    {"id": "UI-03", "name": "Project Status Dots", "completed": "2026-01-25"},
    {"id": "UI-02", "name": "Remove Servers/Codespaces Tabs", "completed": "2026-01-25"},
    {"id": "UI-01", "name": "Simplify Top Bar", "completed": "2026-01-25"}
  ]
}
