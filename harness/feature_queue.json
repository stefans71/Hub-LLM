{
  "version": "5.0",
  "updated": "2026-01-25",
  "session_docs": ["CLAUDE.md", "harness/feature_queue.json"],
  "vision": {
    "summary": "Chat-focused workspace with LLM-Dev panel for dev tools",
    "main_area": "Chat ONLY (no tabs)",
    "llm_dev_panel": {
      "tabs": ["Terminal", "Editor", "Docker", "Logs", "Project Context"],
      "terminal": "Multi-terminal split panes with color coding"
    },
    "left_sidebar": {
      "status_dots": "‚óè green=connected, ‚óã gray=disconnected, üî¥ red=error",
      "project_menu": "3-dot menu (Rename, Settings, Disconnect, Delete)",
      "truncation": "Names truncate with hover tooltip"
    }
  },
  "queue": [
    {
      "id": "AUTH-01",
      "name": "Password Validation Rules",
      "size": "XS",
      "priority": 1,
      "status": "completed",
      "description": "Add password strength requirements on signup",
      "current": "No password validation - any password accepted",
      "change": [
        "Add validation: min 8 chars, 1 uppercase, 1 number, 1 special character",
        "Show validation feedback in real-time as user types",
        "Block form submission if requirements not met",
        "Apply to both signup and password change"
      ],
      "test": "Signup with 'abc' fails with helpful message. Signup with 'Test1234!' succeeds."
    },
    {
      "id": "CLAUDE-01",
      "name": "Detect Claude Code on VPS",
      "size": "S",
      "priority": 1,
      "status": "completed",
      "description": "When VPS connects, detect if Claude Code is installed and authenticated",
      "current": "Model selector shows mock 'INCLUDED' for Anthropic - not actually detecting",
      "change": [
        "On VPS connect: run `which claude` to check if installed",
        "If installed: run `claude --version` to verify working",
        "Store detection result in project/server state",
        "Update model selector: show real status instead of mock 'INCLUDED'",
        "If not installed: show 'Install Claude Code' link ‚Üí setup guide"
      ],
      "test": "Connect VPS with Claude Code ‚Üí Anthropic models enabled. Connect VPS without ‚Üí shows install prompt."
    },
    {
      "id": "MODEL-01",
      "name": "Per-Project Model Persistence",
      "size": "S",
      "priority": 1,
      "status": "completed",
      "description": "Store selected model per project instead of globally",
      "current": "Model selection is global - same for all projects",
      "change": [
        "Add selectedModel field to project in database/localStorage",
        "Load project's model when entering workspace",
        "Save model choice when user changes it",
        "Default to last used model for new projects"
      ],
      "test": "Select Opus in Project A, Sonnet in Project B. Switch between ‚Üí each keeps its model."
    },
    {
      "id": "CLAUDE-02",
      "name": "Route Chat to Claude Code on VPS",
      "size": "M",
      "priority": 1,
      "status": "completed",
      "description": "When Anthropic model selected + Claude Code detected, pipe chat to VPS instead of OpenRouter",
      "current": "All chat goes through OpenRouter API regardless of model",
      "change": [
        "Detect when user selects Anthropic model AND Claude Code available on VPS",
        "Create new chat routing: Chat input ‚Üí SSH ‚Üí `claude` command on VPS",
        "Pipe Claude Code stdout back to chat UI as response",
        "Handle streaming output (Claude Code streams responses)",
        "Maintain conversation context (Claude Code handles this on VPS side)"
      ],
      "test": "Select Claude Opus with VPS connected + Claude Code installed ‚Üí chat response comes from VPS, not OpenRouter."
    },
    {
      "id": "MODEL-02",
      "name": "Billing Source Detection and Display",
      "size": "S",
      "priority": 2,
      "status": "completed",
      "description": "Show user which billing source each model uses",
      "current": "User doesn't know if they're using Pro sub or paid API",
      "change": [
        "For Anthropic models: detect if Claude Code available ‚Üí show 'Pro Subscription'",
        "For Anthropic models without Claude Code: show 'OpenRouter (paid)'",
        "For other models: show 'OpenRouter (paid)'",
        "Add subtle billing indicator in model selector"
      ],
      "test": "With Claude Code: Anthropic shows 'Pro'. Without: shows 'OpenRouter (paid)'."
    },
    {
      "id": "MODEL-03",
      "name": "Billing Switch Warning Popup",
      "size": "S",
      "priority": 2,
      "status": "completed",
      "description": "Warn user when switching to a paid-per-call model",
      "current": "No warning when switching billing sources",
      "change": [
        "Detect when switching FROM Pro subscription TO OpenRouter billing",
        "Show popup: 'You are switching to OpenRouter which bills per API call'",
        "Include 'Don't show again' checkbox",
        "Store preference in user settings"
      ],
      "test": "Using Claude via Pro ‚Üí switch to DeepSeek ‚Üí warning popup appears."
    },
    {
      "id": "ONBOARD-01",
      "name": "Setup Wizard Skeleton",
      "size": "M",
      "priority": 2,
      "status": "completed",
      "description": "Post-signup wizard to configure API keys and VPS",
      "current": "Users go straight to dashboard after signup, may not know how to set up",
      "change": [
        "Create /setup route with step-based wizard",
        "Redirect new users to /setup after first login",
        "Step 1: Choose path - 'I have OpenRouter key' vs 'I have Anthropic Pro'",
        "Step 2a (OpenRouter): Paste API key, validate, save",
        "Step 2b (Anthropic Pro): Connect VPS first, then install Claude Code",
        "Step 3: Optional VPS setup (if not done in 2b)",
        "Mark setup complete in user profile, don't show again"
      ],
      "test": "New signup ‚Üí redirected to /setup ‚Üí complete steps ‚Üí lands on dashboard."
    },
    {
      "id": "CLAUDE-03",
      "name": "Claude Resume Conversation Support",
      "size": "M",
      "priority": 3,
      "status": "pending",
      "description": "Support resuming previous Claude Code conversations",
      "current": "Each chat session starts fresh, no history",
      "change": [
        "Add 'Resume conversation' option in chat header or menu",
        "Run `claude --resume` on VPS and capture conversation list",
        "Show conversation picker modal",
        "User selects conversation ‚Üí continue in that context",
        "Store last conversation ID per project for quick resume"
      ],
      "test": "Have existing Claude conversation on VPS ‚Üí Resume ‚Üí continue where left off."
    }
  ],
  "completed": [
    {"id": "ONBOARD-01", "name": "Setup Wizard Skeleton", "completed": "2026-01-26"},
    {"id": "MODEL-03", "name": "Billing Switch Warning Popup", "completed": "2026-01-26"},
    {"id": "MODEL-02", "name": "Billing Source Detection and Display", "completed": "2026-01-26"},
    {"id": "CLAUDE-02", "name": "Route Chat to Claude Code on VPS", "completed": "2026-01-26"},
    {"id": "CLEANUP-03", "name": "Fix Config Mismatch - Standardize on SQLite + Port 8000", "completed": "2026-01-25"},
    {"id": "FEAT-08", "name": "Chat File Drop and Paste", "completed": "2026-01-25"},
    {"id": "BUG-16", "name": "Terminal Pane Can't Resize Smaller", "completed": "2026-01-25"},
    {"id": "BUG-15", "name": "Terminal Connection Drops on Panel Toggle", "completed": "2026-01-25"},
    {"id": "FEAT-09", "name": "Multi-Terminal Split Panes with Color Coding", "completed": "2026-01-25"},
    {"id": "BUG-14", "name": "Editor Tab Not Loading Selected File", "completed": "2026-01-25"},
    {"id": "BUG-13", "name": "TERMINALS Sidebar Not Visible", "completed": "2026-01-25"},
    {"id": "BUG-12", "name": "xterm-screen Width Calculation", "completed": "2026-01-25"},
    {"id": "FEAT-07", "name": "Multiple Terminal Tabs", "completed": "2026-01-25"},
    {"id": "BUG-11", "name": "LLM-Dev Tabs Don't Switch Content", "completed": "2026-01-25"},
    {"id": "BUG-10", "name": "Terminal Content Cutoff", "completed": "2026-01-25"},
    {"id": "FEAT-04", "name": "Terminal Opens in Project Directory", "completed": "2026-01-25"},
    {"id": "FEAT-03", "name": "Remove Explorer from LLM-Dev Panel", "completed": "2026-01-25"},
    {"id": "FEAT-06", "name": "LLM-Dev Editor Tab", "completed": "2026-01-25"},
    {"id": "UI-06", "name": "Delete Confirmation Modal", "completed": "2026-01-25"},
    {"id": "UI-05", "name": "Project 3-Dot Menu", "completed": "2026-01-25"},
    {"id": "UI-04", "name": "Project Name Truncation", "completed": "2026-01-25"},
    {"id": "UI-03", "name": "Project Status Dots", "completed": "2026-01-25"},
    {"id": "UI-02", "name": "Remove Servers/Codespaces Tabs", "completed": "2026-01-25"},
    {"id": "UI-01", "name": "Simplify Top Bar", "completed": "2026-01-25"}
  ]
}
